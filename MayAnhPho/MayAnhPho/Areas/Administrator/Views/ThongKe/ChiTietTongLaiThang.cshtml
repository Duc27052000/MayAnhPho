@{
    Layout = "~/Areas/Administrator/Views/Shared/_Layout.cshtml";
    MayAnhPho.Areas.Administrator.Models.AdminContext db = new MayAnhPho.Areas.Administrator.Models.AdminContext();
}
<div class="card shadow mb-4">
    <div class="card-header py-3">
        <h3 class="m-0 font-weight-bold text-primary" style="text-transform:uppercase; font-size: xx-large; padding: 10px; border-bottom: solid; border-color: lightskyblue;">Lãi thu nhập</h3>
    </div>
    <div class="card-body">

        <h4 class="small font-weight-bold">Tháng 1 </h4>
        <div class="progress mb-4">
            @{ var donhangthang1 = from o in db.Orders
                                    join od in db.OrderDetails
                                    on o.orderID equals od.orderID
                                    select new { od.orderID, o.orderDateTime, od.proID, od.ordtsThanhTien, od.ordtsQuantity };
                int? tongThang1 = 0;
                int? laiThang1 = 0;
                int? tongLaiThang1 = 0;
                int? sum1 = 0;
                foreach (var item in donhangthang1)
                {
                    sum1 += item.ordtsThanhTien;
                    string a = item.orderDateTime;
                    string[] arrListStr = a.Split(new char[] { '/' });
                    if (arrListStr[1] == "01")
                    {
                        tongThang1 += item.ordtsThanhTien;
                        foreach (var item2 in db.Products)
                        {
                            if (item.proID == item2.proID)
                            {
                                laiThang1 = laiThang1 + item2.proImportPrice * item.ordtsQuantity;
                            }
                        }

                    }
                }
                tongLaiThang1 = tongThang1 - laiThang1;
                int? phanTram1 = (tongLaiThang1 * 100) / sum1;
                <div class="progress-bar bg-info" role="progressbar" style="width: @phanTram1%" aria-valuenow="@tongLaiThang1" aria-valuemin="0" aria-valuemax="10000"></div>
            }
            @tongLaiThang1 VNĐ
        </div>

        <h4 class="small font-weight-bold">Tháng 2 </h4>
        <div class="progress mb-4">
            @{ var donhangthang2 = from o in db.Orders
                                    join od in db.OrderDetails
                                    on o.orderID equals od.orderID
                                    select new { od.orderID, o.orderDateTime, od.proID, od.ordtsThanhTien, od.ordtsQuantity };
                int? tongThang2 = 0;
                int? laiThang2 = 0;
                int? tongLaiThang2 = 0;
                int? sum2 = 0;
                foreach (var item in donhangthang2)
                {
                    sum2 += item.ordtsThanhTien;
                    string a = item.orderDateTime;
                    string[] arrListStr = a.Split(new char[] { '/' });
                    if (arrListStr[1] == "02")
                    {
                        tongThang2 += item.ordtsThanhTien;
                        foreach (var item2 in db.Products)
                        {
                            if (item.proID == item2.proID)
                            {
                                laiThang2 = laiThang2 + item2.proImportPrice * item.ordtsQuantity;
                            }
                        }

                    }
                }
                tongLaiThang2 = tongThang2 - laiThang2;
                int? phanTram2 = (tongLaiThang2 * 100) / sum2;
                <div class="progress-bar bg-info" role="progressbar" style="width: @phanTram2%" aria-valuenow="@tongLaiThang2" aria-valuemin="0" aria-valuemax="10000"></div>
            }
            @tongLaiThang2 VNĐ
        </div>

        <h4 class="small font-weight-bold">Tháng 3 </h4>
        <div class="progress mb-4">
            @{ var donhangthang3 = from o in db.Orders
                                    join od in db.OrderDetails
                                    on o.orderID equals od.orderID
                                    select new { od.orderID, o.orderDateTime, od.proID, od.ordtsThanhTien, od.ordtsQuantity };
                int? tongThang3 = 0;
                int? laiThang3 = 0;
                int? tongLaiThang3 = 0;
                int? sum3 = 0;
                foreach (var item in donhangthang3)
                {
                    sum3 += item.ordtsThanhTien;
                    string a = item.orderDateTime;
                    string[] arrListStr = a.Split(new char[] { '/' });
                    if (arrListStr[1] == "03")
                    {
                        tongThang3 += item.ordtsThanhTien;
                        foreach (var item2 in db.Products)
                        {
                            if (item.proID == item2.proID)
                            {
                                laiThang3 = laiThang3 + item2.proImportPrice * item.ordtsQuantity;
                            }
                        }

                    }
                }
                tongLaiThang3 = tongThang3 - laiThang3;
                int? phanTram3 = (tongLaiThang3 * 100) / sum3;
                <div class="progress-bar bg-info" role="progressbar" style="width: @phanTram3%" aria-valuenow="@tongLaiThang3" aria-valuemin="0" aria-valuemax="10000"></div>
            }
            @tongLaiThang3 VNĐ
        </div>

        <h4 class="small font-weight-bold">Tháng 4 </h4>
        <div class="progress mb-4">
            @{ var donhangthang4 = from o in db.Orders
                                    join od in db.OrderDetails
                                    on o.orderID equals od.orderID
                                    select new { od.orderID, o.orderDateTime, od.proID, od.ordtsThanhTien, od.ordtsQuantity };
                int? tongThang4 = 0;
                int? laiThang4 = 0;
                int? tongLaiThang4 = 0;
                int? sum4 = 0;
                foreach (var item in donhangthang4)
                {
                    sum4 += item.ordtsThanhTien;
                    string a = item.orderDateTime;
                    string[] arrListStr = a.Split(new char[] { '/' });
                    if (arrListStr[1] == "04")
                    {
                        tongThang4 += item.ordtsThanhTien;
                        foreach (var item2 in db.Products)
                        {
                            if (item.proID == item2.proID)
                            {
                                laiThang4 = laiThang4 + item2.proImportPrice * item.ordtsQuantity;
                            }
                        }

                    }
                }
                tongLaiThang4 = tongThang4 - laiThang4;
                int? phanTram4 = (tongLaiThang4 * 100) / sum4;
                <div class="progress-bar bg-info" role="progressbar" style="width: @phanTram4%" aria-valuenow="@tongLaiThang4" aria-valuemin="0" aria-valuemax="10000"></div>
            }
            @tongLaiThang4 VNĐ
        </div>

        <h4 class="small font-weight-bold">Tháng 5</h4>
        <div class="progress mb-4">
            @{ var donhangthang5 = from o in db.Orders
                                    join od in db.OrderDetails
                                    on o.orderID equals od.orderID
                                    select new { od.orderID, o.orderDateTime, od.proID, od.ordtsThanhTien, od.ordtsQuantity };
                int? tongThang5 = 0;
                int? laiThang5 = 0;
                int? tongLaiThang5 = 0;
                int? sum5 = 0;
                foreach (var item in donhangthang5)
                {
                    sum5 += item.ordtsThanhTien;
                    string a = item.orderDateTime;
                    string[] arrListStr = a.Split(new char[] { '/' });
                    if (arrListStr[1] == "05")
                    {
                        tongThang5 += item.ordtsThanhTien;
                        foreach (var item2 in db.Products)
                        {
                            if (item.proID == item2.proID)
                            {
                                laiThang5 = laiThang5 + item2.proImportPrice * item.ordtsQuantity;
                            }
                        }

                    }
                }
                tongLaiThang5 = tongThang5 - laiThang5;
                int? phanTram5 = (tongLaiThang5 * 100) / sum5;
                <div class="progress-bar bg-info" role="progressbar" style="width: @phanTram5%" aria-valuenow="@tongLaiThang5" aria-valuemin="0" aria-valuemax="10000"></div>
            }
            @tongLaiThang5 VNĐ
        </div>

        <h4 class="small font-weight-bold">Tháng 6 </h4>
        <div class="progress mb-4">
            @{ var donhangthang6 = from o in db.Orders
                                    join od in db.OrderDetails
                                    on o.orderID equals od.orderID
                                    select new { od.orderID, o.orderDateTime, od.proID, od.ordtsThanhTien, od.ordtsQuantity };
                int? tongThang6 = 0;
                int? laiThang6 = 0;
                int? tongLaiThang6 = 0;
                int? sum6 = 0;
                foreach (var item in donhangthang6)
                {
                    sum6 += item.ordtsThanhTien;
                    string a = item.orderDateTime;
                    string[] arrListStr = a.Split(new char[] { '/' });
                    if (arrListStr[1] == "06")
                    {
                        tongThang6 += item.ordtsThanhTien;
                        foreach (var item2 in db.Products)
                        {
                            if (item.proID == item2.proID)
                            {
                                laiThang6 = laiThang6 + item2.proImportPrice * item.ordtsQuantity;
                            }
                        }

                    }
                }
                tongLaiThang6 = tongThang6 - laiThang6;
                int? phanTram6 = (tongLaiThang6 * 100) / sum6;
                <div class="progress-bar bg-info" role="progressbar" style="width: @phanTram6%" aria-valuenow="@tongLaiThang6" aria-valuemin="0" aria-valuemax="10000"></div>
            }
            @tongLaiThang6 VNĐ
        </div>

        <h4 class="small font-weight-bold">Tháng 7 </h4>
        <div class="progress mb-4">
            @{ var donhangthang7 = from o in db.Orders
                                    join od in db.OrderDetails
                                    on o.orderID equals od.orderID
                                    select new { od.orderID, o.orderDateTime, od.proID, od.ordtsThanhTien, od.ordtsQuantity };
                int? tongThang7 = 0;
                int? laiThang7 = 0;
                int? tongLaiThang7 = 0;
                int? sum7 = 0;
                foreach (var item in donhangthang7)
                {
                    sum7 += item.ordtsThanhTien;
                    string a = item.orderDateTime;
                    string[] arrListStr = a.Split(new char[] { '/' });
                    if (arrListStr[1] == "07")
                    {
                        tongThang7 += item.ordtsThanhTien;
                        foreach (var item2 in db.Products)
                        {
                            if (item.proID == item2.proID)
                            {
                                laiThang7 = laiThang7 + item2.proImportPrice * item.ordtsQuantity;
                            }
                        }

                    }
                }
                tongLaiThang7 = tongThang7 - laiThang7;
                int? phanTram7 = (tongLaiThang7 * 100) / sum7;
                <div class="progress-bar bg-info" role="progressbar" style="width: @phanTram7%" aria-valuenow="@tongLaiThang7" aria-valuemin="0" aria-valuemax="10000"></div>
            }
            @tongLaiThang7 VNĐ
        </div>

        <h4 class="small font-weight-bold">Tháng 8 </h4>
        <div class="progress mb-4">
            @{ var donhangthang8 = from o in db.Orders
                                    join od in db.OrderDetails
                                    on o.orderID equals od.orderID
                                    select new { od.orderID, o.orderDateTime, od.proID, od.ordtsThanhTien, od.ordtsQuantity };
                int? tongThang8 = 0;
                int? laiThang8 = 0;
                int? tongLaiThang8 = 0;
                int? sum8 = 0;
                foreach (var item in donhangthang8)
                {
                    sum8 += item.ordtsThanhTien;
                    string a = item.orderDateTime;
                    string[] arrListStr = a.Split(new char[] { '/' });
                    if (arrListStr[1] == "08")
                    {
                        tongThang8 += item.ordtsThanhTien;
                        foreach (var item2 in db.Products)
                        {
                            if (item.proID == item2.proID)
                            {
                                laiThang8 = laiThang8 + item2.proImportPrice * item.ordtsQuantity;
                            }
                        }

                    }
                }
                tongLaiThang8 = tongThang8 - laiThang8;
                int? phanTram8 = (tongLaiThang8 * 100) / sum8;
                <div class="progress-bar bg-info" role="progressbar" style="width: @phanTram8%" aria-valuenow="@tongLaiThang8" aria-valuemin="0" aria-valuemax="10000"></div>
            }
            @tongLaiThang8 VNĐ
        </div>

        <h4 class="small font-weight-bold">Tháng 9 </h4>
        <div class="progress mb-4">
            @{ var donhangthang9 = from o in db.Orders
                                    join od in db.OrderDetails
                                    on o.orderID equals od.orderID
                                    select new { od.orderID, o.orderDateTime, od.proID, od.ordtsThanhTien, od.ordtsQuantity };
                int? tongThang9 = 0;
                int? laiThang9 = 0;
                int? tongLaiThang9 = 0;
                int? sum9 = 0;
                foreach (var item in donhangthang9)
                {
                    sum9 += item.ordtsThanhTien;
                    string a = item.orderDateTime;
                    string[] arrListStr = a.Split(new char[] { '/' });
                    if (arrListStr[1] == "01")
                    {
                        tongThang9 += item.ordtsThanhTien;
                        foreach (var item2 in db.Products)
                        {
                            if (item.proID == item2.proID)
                            {
                                laiThang9 = laiThang9 + item2.proImportPrice * item.ordtsQuantity;
                            }
                        }

                    }
                }
                tongLaiThang9 = tongThang9 - laiThang9;
                int? phanTram9 = (tongLaiThang9 * 100) / sum9;
                <div class="progress-bar bg-info" role="progressbar" style="width: @phanTram9%" aria-valuenow="@tongLaiThang9" aria-valuemin="0" aria-valuemax="10000"></div>
            }
            @tongLaiThang9 VNĐ
        </div>

        <h4 class="small font-weight-bold">Tháng 10 </h4>
        <div class="progress mb-4">
            @{ var donhangthang10 = from o in db.Orders
                                     join od in db.OrderDetails
                                     on o.orderID equals od.orderID
                                     select new { od.orderID, o.orderDateTime, od.proID, od.ordtsThanhTien, od.ordtsQuantity };
                int? tongThang10 = 0;
                int? laiThang10 = 0;
                int? tongLaiThang10 = 0;
                int? sum10 = 0;
                foreach (var item in donhangthang10)
                {
                    sum10 += item.ordtsThanhTien;
                    string a = item.orderDateTime;
                    string[] arrListStr = a.Split(new char[] { '/' });
                    if (arrListStr[1] == "10")
                    {
                        tongThang10 += item.ordtsThanhTien;
                        foreach (var item2 in db.Products)
                        {
                            if (item.proID == item2.proID)
                            {
                                laiThang10 = laiThang10 + item2.proImportPrice * item.ordtsQuantity;
                            }
                        }

                    }
                }
                tongLaiThang10 = tongThang10 - laiThang10;
                int? phanTram10 = (tongLaiThang10 * 100) / sum10;
                <div class="progress-bar bg-info" role="progressbar" style="width: @phanTram10%" aria-valuenow="@tongLaiThang10" aria-valuemin="0" aria-valuemax="10000"></div>
            }
            @tongLaiThang10 VNĐ
        </div>

        <h4 class="small font-weight-bold">Tháng 11 </h4>
        <div class="progress mb-4">
            @{ var donhangthang11 = from o in db.Orders
                                     join od in db.OrderDetails
                                     on o.orderID equals od.orderID
                                     select new { od.orderID, o.orderDateTime, od.proID, od.ordtsThanhTien, od.ordtsQuantity };
                int? tongThang11 = 0;
                int? laiThang11 = 0;
                int? tongLaiThang11 = 0;
                int? sum11 = 0;
                foreach (var item in donhangthang11)
                {
                    sum11 += item.ordtsThanhTien;
                    string a = item.orderDateTime;
                    string[] arrListStr = a.Split(new char[] { '/' });
                    if (arrListStr[1] == "11")
                    {
                        tongThang11 += item.ordtsThanhTien;
                        foreach (var item2 in db.Products)
                        {
                            if (item.proID == item2.proID)
                            {
                                laiThang11 = laiThang11 + item2.proImportPrice * item.ordtsQuantity;
                            }
                        }

                    }
                }
                tongLaiThang11 = tongThang11 - laiThang11;
                int? phanTram11 = (tongLaiThang11 * 100) / sum11;
                <div class="progress-bar bg-info" role="progressbar" style="width: @phanTram11%" aria-valuenow="@tongLaiThang11" aria-valuemin="0" aria-valuemax="10000"></div>
            }
            @tongLaiThang11 VNĐ
        </div>

        <h4 class="small font-weight-bold">Tháng 12 </h4>
        <div class="progress mb-4">
            @{ var donhangthang12 = from o in db.Orders
                                     join od in db.OrderDetails
                                     on o.orderID equals od.orderID
                                     select new { od.orderID, o.orderDateTime, od.proID, od.ordtsThanhTien, od.ordtsQuantity };
                int? tongThang12 = 0;
                int? laiThang12 = 0;
                int? tongLaiThang12 = 0;
                int? sum12 = 0;
                foreach (var item in donhangthang12)
                {
                    sum12 += item.ordtsThanhTien;
                    string a = item.orderDateTime;
                    string[] arrListStr = a.Split(new char[] { '/' });
                    if (arrListStr[1] == "12")
                    {
                        tongThang12 += item.ordtsThanhTien;
                        foreach (var item2 in db.Products)
                        {
                            if (item.proID == item2.proID)
                            {
                                laiThang12 = laiThang12 + item2.proImportPrice * item.ordtsQuantity;
                            }
                        }

                    }
                }
                tongLaiThang12 = tongThang12 - laiThang12;
                int? phanTram12 = (tongLaiThang12 * 100) / sum12;
                <div class="progress-bar bg-info" role="progressbar" style="width: @phanTram12%" aria-valuenow="@tongLaiThang12" aria-valuemin="0" aria-valuemax="10000"></div>
            }
            @tongLaiThang12 VNĐ
        </div>
    </div>

</div>